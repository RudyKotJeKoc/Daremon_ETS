<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DAREMON Radio ETS</title>

  <meta name="description" content="Het offici√´le bedrijfsradiostation DAREMON ETS. Humor, technologie en najlepsza muzyka." />
  <meta name="theme-color" content="#1A1A1A" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- Favicon -->
  <link rel="icon" href="https://public-frontend-cos.metadl.com/mgx/img/favicon.png" type="image/png" />

  <!-- Fonts and Styles -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body data-theme="arburg">
  <!-- Visualizer -->
  <canvas id="visualizer-canvas"></canvas>
  <div id="offline-indicator" class="hidden" aria-live="assertive" data-i18n-key="offlineMessage"></div>

  <div id="app-container">
    <!-- Widok odtwarzacza radia -->
    <div id="radio-view">
      <aside id="side-panel">
        <button id="menu-toggle" data-i18n-aria-label="menuToggleLabel">‚ò∞</button>
        <div id="drawer-menu">
          <section class="content-box">
            <h3 data-i18n-key="recentlyPlayed">Recently Played</h3>
            <ul id="history-list" class="side-panel-list" aria-live="polite"></ul>
          </section>

          <section class="content-box">
            <h3 data-i18n-key="topRated">Top Rated</h3>
            <ul id="top-rated-list" class="side-panel-list interactive-list"></ul>
          </section>

          <section class="content-box">
            <h3 data-i18n-key="goldenRecords">Golden Records</h3>
            <ul id="golden-records-list" class="side-panel-list interactive-list"></ul>
          </section>

          <!-- TOP Tracks section -->
          <section class="content-box">
            <h3 data-i18n-key="topTracksTitle">üî• Top Utwory</h3>
            <ul id="top-tracks-list" class="side-panel-list interactive-list"></ul>
          </section>

          <section class="content-box">
            <h3 data-i18n-key="messageToDJ">Message to DJ</h3>
            <form id="dj-message-form">
              <textarea id="dj-message-input" name="message" rows="3" data-i18n-placeholder="djMessagePlaceholder" maxlength="200" required aria-required="true"></textarea>
              <button type="submit" data-i18n-key="sendMessage">Send</button>
            </form>
            <ul id="messages-list" aria-live="polite"></ul>
            <p class="disclaimer-text">
              <span class="disclaimer-highlight" data-i18n-key="disclaimerHighlight"></span>
              <span data-i18n-key="disclaimerText"></span>
            </p>
          </section>

          <section class="content-box">
            <h3 data-i18n-key="changeTheme">Change Theme</h3>
            <div class="theme-switcher">
              <button id="theme-arburg" data-i18n-title="themeArburg" data-i18n-aria-label="themeArburgLabel">Arburg</button>
              <button id="theme-rave" data-i18n-title="themeRave" data-i18n-aria-label="themeRaveLabel">Rave</button>
            </div>
          </section>
        </div>
      </aside>

      <main id="main-content">
        <header>
          <h1>DAREMON Radio ETS</h1>
          <p data-i18n-key="headerSubtitle">Humor, technologie en najlepsza muzyka.</p>
          <p id="listener-count-display"><span data-i18n-key="listenersLabel">Listeners:</span> <span id="listener-count">0</span></p>
        </header>

        <section id="now-playing-section" class="content-box">
          <div id="player-ui" style="display:flex">
            <img id="track-cover" src="https://placehold.co/120x120/1A1A1A/008878?text=ETS" alt="Ok≈Çadka aktualnego utworu" />
            <div id="track-info">
              <h2 id="track-title" aria-live="polite" data-i18n-key="trackTitleDefault">Track Title</h2>
              <h3 id="track-artist" data-i18n-key="trackArtistDefault">Artist</h3>
              <div id="progress-container" role="slider" data-i18n-aria-label="progressBarLabel" tabindex="0">
                <div id="progress-bar" style="width:0%"></div>
              </div>
              <div id="time-container">
                <span id="current-time">0:00</span>
                <span id="time-remaining">-0:00</span>
              </div>
              <div id="rating-section">
                <div id="average-rating-display">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                <div class="star-rating" data-i18n-aria-label="ratingLabel"></div>
                <form id="comment-form" class="hidden">
                  <textarea id="comment-input" data-i18n-placeholder="commentPlaceholder" maxlength="200"></textarea>
                  <button type="submit" data-i18n-key="submitReview">Submit</button>
                </form>
              </div>
            </div>
          </div>
          <div id="player-controls" style="display:flex">
            <button id="play-pause-btn" class="control-btn" data-i18n-title="playPauseTooltip" data-i18n-aria-label="playPauseLabel">‚ñ∂Ô∏è</button>
            <button id="next-btn" class="control-btn" data-i18n-title="nextTooltip" data-i18n-aria-label="nextLabel">‚è≠Ô∏è</button>
            <button id="like-btn" class="control-btn" data-i18n-title="likeTooltip" data-i18n-aria-label="likeLabel">üëç <span id="like-count">0</span></button>
            <div id="volume-control" data-i18n-title="volumeTooltip">
              <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5" data-i18n-aria-label="volumeLabel" />
            </div>
            <button id="tv-mode-btn" class="control-btn" data-i18n-title="fullscreenTooltip" data-i18n-aria-label="fullscreenLabel" disabled>üì∫</button>
          </div>
        </section>
        <div id="hotkeys-info" data-i18n-key="hotkeysInfo">Hotkeys: Space=Play/Pause, N=Next, ‚Üë/‚Üì=Volume</div>
      </main>
    </div>
  </div>

  <!-- Sticky player -->
  <div id="sticky-player" style="display:grid">
    <img id="sticky-track-cover" src="https://placehold.co/40x40/1A1A1A/008878?text=ETS" alt="Ok≈Çadka utworu na przypiƒôtym odtwarzaczu" />
    <div id="sticky-player-info">
      <h5 id="sticky-track-title" data-i18n-key="trackTitleDefault">Track Title</h5>
      <div id="sticky-progress-container">
        <div id="sticky-progress-bar" style="width:0%"></div>
      </div>
    </div>
    <div id="sticky-player-controls">
      <button id="sticky-play-pause-btn" class="control-btn" data-i18n-aria-label="playPauseLabel">‚ñ∂Ô∏è</button>
      <button id="sticky-next-btn" class="control-btn" data-i18n-aria-label="nextLabel">‚è≠Ô∏è</button>
    </div>
  </div>

  <!-- Overlay autoplay (ukryty) -->
  <div id="autoplay-overlay" class="hidden">
    <div id="welcome-greeting"></div>
    <button id="start-btn" data-i18n-key="startBtn"></button>
  </div>

  <div id="error-overlay" class="hidden">
    <div id="error-message-box">
      <div id="error-message"></div>
      <button id="error-retry-btn" class="hidden" data-i18n-key="retryBtn"></button>
      <button id="error-close-btn">OK</button>
    </div>
  </div>

  <!-- Important: scripts (module, non-blocking) -->
  <script type="module" src="./app.js"></script>
  <script type="module" src="./ui_bootstrap.js"></script>
</body>
</html>